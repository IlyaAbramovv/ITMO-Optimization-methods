import functions.*;
import lab2.GradientDescentMode;
import lab2.Minimization2;
import lab3.Minimization3;
import matrixes.VectorUtils;

import java.util.List;
import java.util.Map;

public class Main {
    public static void main(String[] args) {

        System.out.println(VectorUtils.getMaxDiff(Map.of("x0",0.0,"x1",-3.0,"x2",-4.0)));
        Sum sum = new Sum(List.of(
              new Subtract(new Variable("x0"), new Const(2.0)),
        new Subtract(new Variable("x1"), new Const(4.0)),
       new Subtract(new Variable("x2"), new Const(-2.0))

        ));
        var ress = Minimization3.powellDogLeg(sum,2);
        System.out.println(ress);


        List<Main.Point> points = List.of(new Main.Point(4.347636506625973, 3.9635298881939627),
                new Main.Point(-4.500131676766713, 0.024317059518353168),
                new Main.Point(4.81500462104642, 4.538704289269733),
                new Main.Point(4.724622520435478, 4.808388584695689),
                new Main.Point(-2.7336402455578224, 0.43689417842954525),
                new Main.Point(3.4792817391244206, 4.031380117000439),
                new Main.Point(-2.188693285662775, 1.1544277309238453),
                new Main.Point(0.9280347358689447, 2.6304680628290513),
                new Main.Point(2.613699031765351, 3.514611920365066),
                new Main.Point(1.6494710314204681, 2.8359108326992764),
                new Main.Point(0.31390577230803096, 2.5892458248568126),
                new Main.Point(3.209641949420396, 3.917665550124858),
                new Main.Point(-3.61965445532733, 0.3008018177807218),
                new Main.Point(-1.916388766452366, 0.6998176176688325),
                new Main.Point(1.7123870299857833, 2.6715553087609742),
                new Main.Point(-1.3395001591430367, 1.448271795328337),
                new Main.Point(4.265408290078993, 3.8052509616295485),
                new Main.Point(-4.454662917254337, 0.24763543275837707),
                new Main.Point(3.666295709260048, 3.8851546663049636),
                new Main.Point(0.3225868905153071, 2.2838663374249046),
                new Main.Point(-4.045839649436056, 0.18785529419803704),
                new Main.Point(-1.6624459585400353, 0.9324374235927657),
                new Main.Point(-4.0677107849094405, 0.057078467684494316),
                new Main.Point(3.3154864896848046, 3.655786763575186),
                new Main.Point(3.4934204502680295, 3.8657079351292762),
                new Main.Point(3.7049324725330983, 3.799436506146982),
                new Main.Point(2.7104828654223434, 2.996887805537219),
                new Main.Point(0.801269059312987, 2.2668815674860836),
                new Main.Point(4.816969230670313, 4.4907227329239),
                new Main.Point(2.750039519564397, 2.983052862517683),
                new Main.Point(4.7148305354062625, 4.58125538724385),
                new Main.Point(-4.871720957181528, -0.23087433327473583),
                new Main.Point(-4.391208709259811, -0.3470995034454796),
                new Main.Point(3.1365621609430416, 3.8796541865885086),
                new Main.Point(-3.339740941851237, -0.16623889350407206),
                new Main.Point(-3.6597778760716015, 0.3789119970914472),
                new Main.Point(-0.7135712887373415, 1.5370424622910668),
                new Main.Point(-2.01732276818547, 0.9734946431549724),
                new Main.Point(3.0345918600763397, 3.9478704909037825),
                new Main.Point(-0.8263431168322004, 2.0542074571603073),
                new Main.Point(-4.599847622091593, -0.5039968724167196),
                new Main.Point(-4.421621078761429, -0.5922585109538183),
                new Main.Point(4.2393754682829226, 4.366815213236163),
                new Main.Point(0.44958533259167055, 2.6503733453590748),
                new Main.Point(2.9143610091581973, 3.9488744811852357),
                new Main.Point(-0.5857542516467795, 1.5073748078523463),
                new Main.Point(2.2449183895515334, 3.5428863020712473),
                new Main.Point(4.792808293263089, 4.751143216026743),
                new Main.Point(3.4561158341458054, 4.051687190135758),
                new Main.Point(4.692567934924675, 4.346886444081982),
                new Main.Point(3.300490429451056, 3.2081025736674915),
                new Main.Point(1.412008063168658, 2.3326300097364907),
                new Main.Point(-3.822980455768674, 0.1954398735363695),
                new Main.Point(-0.8416237743822048, 1.5382051863335906),
                new Main.Point(-2.9139264296411627, 0.3134058216546278),
                new Main.Point(-0.5678718140845218, 1.904653129571054),
                new Main.Point(-3.819458186070368, 0.5044644294609071),
                new Main.Point(2.394748610204469, 3.098864931152609),
                new Main.Point(-1.814569230265164, 1.2022462285173563),
                new Main.Point(-4.525401371746397, -0.011678931407808513),
                new Main.Point(-3.78332204508373, -0.0414176640280296),
                new Main.Point(0.9061567938611281, 2.50498464712288),
                new Main.Point(-0.2638691325745679, 1.7337546804974533),
                new Main.Point(1.527834885803209, 2.6928229155101593),
                new Main.Point(-0.7274944520047484, 1.3865076670441772),
                new Main.Point(0.6633980831857542, 2.325772613552416),
                new Main.Point(-3.7083034017279672, -0.055643962407367575),
                new Main.Point(4.004213591295306, 3.654643533275983),
                new Main.Point(4.635297229743205, 4.107615133380191),
                new Main.Point(3.2929320896685557, 3.3030304432615885),
                new Main.Point(0.39092203966611194, 2.4547757442568376),
                new Main.Point(-2.3073641870031536, 0.8643896453267822),
                new Main.Point(-4.52811035846504, -0.3410750291914779),
                new Main.Point(-4.813536869917123, -0.22696930988565955),
                new Main.Point(-2.654709221330714, 0.6447423467998887),
                new Main.Point(2.787453073738657, 3.1130933408974357),
                new Main.Point(-3.2380340804134846, 0.671006021598975),
                new Main.Point(3.5263055573750606, 3.458285774765919),
                new Main.Point(-4.070941224061978, -0.4489526836833151),
                new Main.Point(-1.2848527063241253, 1.7001833854329877),
                new Main.Point(2.745603774661255, 3.0335332312433256),
                new Main.Point(0.3765596734871002, 2.6522217367611765),
                new Main.Point(2.5989235652424636, 3.3581248111620385),
                new Main.Point(3.249601496213959, 3.5837186928906655),
                new Main.Point(0.3007997542058929, 1.89475428684197),
                new Main.Point(-3.146483150714899, 0.4171496984808668),
                new Main.Point(2.7345926510075804, 3.2561552874044017),
                new Main.Point(-3.127749999695817, 0.7462472043132214),
                new Main.Point(0.19635088897379394, 2.3975806747547703),
                new Main.Point(0.8451812998703634, 2.8841874748350262),
                new Main.Point(4.35210238497695, 4.271706592311994),
                new Main.Point(-3.588973920506798, 0.48140061047716565),
                new Main.Point(-3.4168021138309235, 0.7117875731766675),
                new Main.Point(-2.83421786079796, 0.5092753846051501),
                new Main.Point(0.8624836949046539, 2.5498798002008973),
                new Main.Point(0.8784526457693218, 2.7211867016523024),
                new Main.Point(-4.345319626164295, 0.2502024911589277),
                new Main.Point(4.380664316148815, 3.763362232012917),
                new Main.Point(4.047400039288696, 3.569969150545713),
                new Main.Point(-4.141443704928641, -0.13671870667941777),
                new Main.Point(0.5938640870353771, 2.548245830027002),
                new Main.Point(2.746836351537743, 3.7415118239127527),
                new Main.Point(-3.196387189954412, 0.7842390476759149),
                new Main.Point(-2.3326025544152005, 0.43626450965825936),
                new Main.Point(1.1139068808248664, 2.5460832574996193),
                new Main.Point(-0.40206147666647407, 1.542723893684664),
                new Main.Point(-2.1571100967403933, 1.1226343983596858),
                new Main.Point(-2.8562527771884803, 0.2855900875124028),
                new Main.Point(3.665529482160535, 3.4462252115980228),
                new Main.Point(1.3528209683655206, 3.0696783366332063),
                new Main.Point(3.363077680894966, 3.5440367317029766),
                new Main.Point(3.6867656284290877, 3.9571439249742806),
                new Main.Point(1.5912596005874136, 2.411907267663554),
                new Main.Point(0.29664874073390557, 2.0253277074932),
                new Main.Point(4.48090633742005, 3.906084287169307),
                new Main.Point(4.632127078263213, 4.63588900220408),
                new Main.Point(-3.7805463704459754, 0.15535253479442834),
                new Main.Point(0.6338214272745999, 2.0437511633971357),
                new Main.Point(2.117288214315237, 3.1969450699809903),
                new Main.Point(-2.928070507627345, 0.1465725762672978),
                new Main.Point(2.147603245698556, 2.8888541671152312),
                new Main.Point(-2.247249587611954, 1.2168678103400776),
                new Main.Point(4.756867739978205, 4.789831064840798),
                new Main.Point(-4.065693163207561, -0.21692486184997206),
                new Main.Point(-4.217685845646858, -0.4510397645809626),
                new Main.Point(0.6071173475453513, 2.2960480971974877),
                new Main.Point(-3.5107627041497222, -0.2074586076012893),
                new Main.Point(4.8964644688523755, 4.406575526448631),
                new Main.Point(-3.715771712892769, 0.0815637842654664),
                new Main.Point(4.576998790570968, 4.637308901052146),
                new Main.Point(3.6335974710481818, 3.831501747259494),
                new Main.Point(4.836266510372461, 4.2532903647681595),
                new Main.Point(-0.10009958053159629, 2.4255625973275468),
                new Main.Point(1.8441782910194515, 3.0592964732381698),
                new Main.Point(2.296507009700165, 3.2564107782516394),
                new Main.Point(-2.5641382458140938, 0.42438497379972395),
                new Main.Point(2.4679308396114177, 3.72453666617952),
                new Main.Point(-0.56716913473206, 1.4763420521036998),
                new Main.Point(-1.1689763401606692, 1.8699524705193524),
                new Main.Point(2.939025546624502, 3.1178941627627967),
                new Main.Point(4.382861032824721, 3.942367337557018),
                new Main.Point(-4.3076545239603625, -0.03732503015701483),
                new Main.Point(-1.1732827471177543, 1.83384188231397),
                new Main.Point(-4.120262527348354, 0.16887387978465218),
                new Main.Point(1.8266256365109896, 3.0633103430987996),
                new Main.Point(-2.2787062548679193, 1.094670830893854),
                new Main.Point(1.3773174273601878, 2.409311647695941),
                new Main.Point(-1.6805192277371352, 1.0348723133538793),
                new Main.Point(1.7810058441209788, 2.8783419795150973),
                new Main.Point(2.2579073305147555, 2.979644829884983),
                new Main.Point(2.827673412090677, 3.2033752333889813),
                new Main.Point(3.984648053096647, 4.130686361293878),
                new Main.Point(-2.63247334862767, 1.0624179971973966),
                new Main.Point(1.402515051590675, 2.8352044899506046),
                new Main.Point(2.958616399021107, 3.319453101782057),
                new Main.Point(1.706556880110588, 3.3195585206051477),
                new Main.Point(2.982533950632452, 3.207195651781766),
                new Main.Point(4.136135718819084, 3.947450404012299),
                new Main.Point(-3.5850950391259695, -0.2713871997640508),
                new Main.Point(-3.743956867923932, -0.04744365863110522),
                new Main.Point(-2.8537020465165917, 0.281557354004379),
                new Main.Point(-2.435972033838265, 0.6101620968863475),
                new Main.Point(3.6077841224945786, 3.3430568763462256),
                new Main.Point(-1.3869386106385342, 0.8214020628627705),
                new Main.Point(-1.0530668141299602, 1.5181608682410528),
                new Main.Point(3.1686194350666774, 3.4221098092309563),
                new Main.Point(-3.4048923863177305, 0.38341344718765447),
                new Main.Point(0.40395461973769287, 2.4619835905012755),
                new Main.Point(4.646826868186764, 4.150542133915029),
                new Main.Point(-2.544805642761095, 0.43521421994579634),
                new Main.Point(0.8799005426445969, 2.51573560179194),
                new Main.Point(4.579226924730705, 4.057081940889294),
                new Main.Point(-4.675126375168752, -0.18698875106783808),
                new Main.Point(1.0187404727840956, 2.7753778935440625),
                new Main.Point(-0.08383721728586568, 1.9634172759680628),
                new Main.Point(-2.7747520931345546, 0.2852187525243688),
                new Main.Point(2.1674150847712177, 3.2989116421208124),
                new Main.Point(2.1673007111760967, 2.9428513414399786),
                new Main.Point(-2.2868722097608685, 1.1496931125776855),
                new Main.Point(-2.0748672743949506, 1.0564805227151761),
                new Main.Point(-0.7455046249322148, 1.6605864783138367),
                new Main.Point(-0.3015579450701278, 1.7501607140392514),
                new Main.Point(2.130132224119448, 2.872190004092862),
                new Main.Point(2.3432130177749313, 3.25348695319412),
                new Main.Point(3.3342529316739427, 4.019885975866515),
                new Main.Point(1.8126779398800679, 2.6192984111932622),
                new Main.Point(-3.6461205907024152, 0.2941830265397356),
                new Main.Point(0.9399429632936398, 2.957880626422709),
                new Main.Point(3.6171543105278996, 3.337492792557871),
                new Main.Point(0.8780504660804844, 2.165121236603324),
                new Main.Point(-3.374392272656128, -0.1589097032334602),
                new Main.Point(0.9755301564000565, 2.194501221067546),
                new Main.Point(-0.9348936150139098, 1.5409776442504182),
                new Main.Point(1.4741526874504371, 2.240303905241567),
                new Main.Point(-2.768288666876497, 0.3982965674543959),
                new Main.Point(0.42527888905091515, 2.528704409849366),
                new Main.Point(3.299092360837978, 3.6313316150103),
                new Main.Point(4.503265549579297, 4.425193950932332),
                new Main.Point(4.6242766047726285, 4.236920418695221),
                new Main.Point(0.3487958885239024, 2.363114386713454));
        List<Double> x = points.stream().map(Main.Point::x).toList();
        List<Double> y = points.stream().map(Main.Point::y).toList();
        var res = Minimization2.linearRegression(x, y,
                GradientDescentMode.COMMON,
                1);
    }

    record Point(double x, double y) {
    }
}